# Linux for pentesting

*notes fom the cybermentors YouTube playlist 'Beginner Linux for pentesting'*

## Networking

```
ifconfig
```
shows ip addresses and mac addresses associated with machine

```
iwconfig
```
similar to ```ifconfig``` but only shows wireless options

```
arp -a
```
shows all in and out traffic from ports

```
netstat
```
detailed view of traffic in and out of ports

```
route
```
shows where traffic is exiting

## Using echo to append a file

```
echo 'hello' > hello.txt
```
using ```>``` will overwrite the file, so if I wrote ```echo 'hello again' > hello.txt```

the output would erase my oringial message, ```hello```

however, we can use ```>>``` to append the file. For example:

```
echo "hello again" >> hello.txt
```
This is useful for adding to lists like adding ips to a list or payloads etc

## Installing packages in Kali


before we install new package, we need to check we are up to date on kali with:
```
apt-get update && apt-get upgrade
```
# Service control in Kali (Apache, ssh, postgresql)

```
service apache2 start
```

Good for sending malicious files 

To keep it running at all times (on systemctl)

```
systemctl enable apache2
```

Now, when we reboot or shutdown, this will start with boot

other useful services
```
systemctl enable ssh
systemctl enable postgresql
```
*postgresql helps metasploit to run*

# Extracting using grep and cut

## focus: Ping a machine and grab the IP information

```
ping 192.168.2.1
```
the output is currently:
```
PING 192.168.0.255 (192.168.0.255): 56 data bytes
64 bytes from 192.168.0.5: icmp_seq=0 ttl=64 time=0.112 ms
64 bytes from 192.168.0.5: icmp_seq=1 ttl=64 time=0.250 ms
64 bytes from 192.168.0.5: icmp_seq=2 ttl=64 time=0.260 ms
64 bytes from 192.168.0.5: icmp_seq=3 ttl=64 time=0.087 ms
64 bytes from 192.168.0.5: icmp_seq=4 ttl=64 time=0.228 ms
^C
--- 192.168.0.255 ping statistics ---
5 packets transmitted, 5 packets received, 0.0% packet loss
round-trip min/avg/max/stddev = 0.087/0.187/0.260/0.073 ms
```
Now, let's put the output into the terminal, but we only actually need one line of the successful output

```
ping 192.168.0.255 -c 1  > ip_response.txt
```
Now we are printing the first successful out to a file called ip_response.txt

```
~ cat ip_response.txt | grep "64 bytes"
64 bytes from 192.168.0.5: icmp_seq=0 ttl=64 time=0.080 ms
```
The output here is more concise, but we only want the IP address, so we can add en extra pipe
```
cat ip_response.txt | grep "64 bytes"| cut -d  " " -f 4
```
gives the output
```
192.168.0.5:
```
Now, we just need to get rid of the ```:``` with a translate pipe

```
cat ip_response.txt | grep "64 bytes"| cut -d  " " -f 4| tr -d ":"
```
and then we get only the IP. 

## Usecase for scripting IP info

A bash script that cycles through ips and pings a responsed which parses out only the IP address.

```
#!/bin/bash

for ip in {1..254}; do

ping -c 1 $1.$ip | grep "64 bytes" | cut -d " " -f 4 | tr -d ":" &

done
```
to run this

```
./ipsweep.sh 192.168.0 > ip_results.txt
```
Output:
```
192.168.0.10
192.168.0.53
192.168.0.21
192.168.0.18
192.168.0.15
```

To give an error and a little message to help, we added some try catch kind of statement

```
#!/bin/bash

if ["$1" == ""]
then 
echo "You need to provide an IP address"
echo "Example : ./ipsweep.sh 193.189.0"

else 


for ip in {1..254}; do
ping -c 1 $1.$ip | grep "64 bytes" | cut -d " " -f 4 | tr -d ":" &
done

fi
```
Now we can use this to scan all the ips we caught in nmap in one for loop
```	
for ip in $(cat ip.txt); do nmap -sS -p80 -T4 $ip & done
```


